# Cloudflare Pages configuration
name = "onlinemid-portal"
compatibility_date = "2024-09-23"
compatibility_flags = ["nodejs_compat"]

# Pages configuration
[build]
command = "npm run build"
cwd = "."
output = "dist"

# Environment variables
[env.production.vars]
NODE_ENV = "production"

[env.preview.vars]
NODE_ENV = "preview"

# D1 Database bindings
[[env.production.d1_databases]]
binding = "DB"
database_name = "onlinemid-portal-db"
database_id = "your-database-id"

[[env.preview.d1_databases]]
binding = "DB"
database_name = "onlinemid-portal-preview-db"
database_id = "your-preview-d1-database-id"

# KV namespace bindings (alternative to D1)
[[env.production.kv_namespaces]]
binding = "USERS_KV"
id = "your-users-kv-id"

[[env.production.kv_namespaces]]
binding = "USERNAME_INDEX_KV"
id = "your-username-index-kv-id"

[[env.preview.kv_namespaces]]
binding = "USERS_KV"
id = "your-preview-users-kv-id"

[[env.preview.kv_namespaces]]
binding = "USERNAME_INDEX_KV"
id = "your-preview-username-index-kv-id"